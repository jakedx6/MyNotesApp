<!DOCTYPE html>
<html lang="en" class="dark">

<head>
  <meta charset="UTF-8">
  <title>Markdown Notes App</title>
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Enable dark mode in Tailwind config -->
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {},
      },
      plugins: [
        function ({ addBase, theme }) {
          function extractColorVars(colorObj, colorGroup = '') {
            return Object.keys(colorObj).reduce((vars, colorKey) => {
              const value = colorObj[colorKey];

              const newVars =
                typeof value === 'string'
                  ? { [`--color${colorGroup}-${colorKey}`]: value }
                  : extractColorVars(value, `-${colorKey}`);

              return { ...vars, ...newVars };
            }, {});
          }

          addBase({
            ':root': extractColorVars(theme('colors')),
          });
        },
      ],
    }
  </script>
  <link rel="manifest" href="manifest.json">
  <!-- Include EasyMDE CSS -->
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="https://unpkg.com/easymde/dist/easymde.min.css">
</head>

<body class="bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-100">
  <div id="app" class="flex flex-col h-screen">
    <header class="bg-gray-100 dark:bg-gray-800 p-4 flex items-center justify-between">
      <h1 class="text-xl font-bold">Markdown Notes</h1>
      <div class="flex items-center space-x-2">
        <button id="new-note-btn" class="px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600">New Note</button>
        <button id="new-folder-btn" class="px-4 py-2 bg-yellow-500 text-white rounded hover:bg-yellow-600">New
          Folder</button>
        <button id="change-directory-btn" class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">Change
          Directory</button>
        <button id="open-settings-btn">Settings</button>
        <button id="toggle-dark-mode-btn" onclick="toggleDarkMode()"
          class="px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600">Toggle
          Dark Mode</button>
      </div>
    </header>
    <div class="flex flex-1 overflow-hidden">
      <nav id="folder-list" class="w-64 border-r border-gray-200 dark:border-gray-700 overflow-y-auto">
        <!-- Folder tree will be rendered here -->
      </nav>
      <main class="flex flex-1 flex-col overflow-hidden">
        <!-- Prompt Container -->
        <div id="prompt-container" class="flex-1 flex items-center justify-center">
          <div class="text-center">
            <p class="mb-4">Please select a directory to continue.</p>
            <button id="open-directory-btn" class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">Open
              Directory</button>
          </div>
        </div>
        <!-- Editor -->
        <div id="editor-container" class="flex-1 overflow-auto" style="display: none;">
          <textarea id="editor"></textarea>
        </div>
        <!-- Placeholder Message -->
        <div id="placeholder-container" class="flex-1 flex items-center justify-center" style="display: none;">
          <div class="text-center text-gray-500">
            <p>Select a markdown file to start editing.</p>
          </div>
        </div>
      </main>
    </div>
  </div>
  <!-- AI Response Modal -->
  <div id="ai-response-modal" class="modal" style="display: none;">
    <div class="modal-content">
      <span id="close-modal" class="close-button">&times;</span>
      <h2>AI Response</h2>
      <textarea id="ai-response-text" readonly></textarea>
      <div class="modal-actions">
        <button id="copy-button" class="modal-button">Copy</button>
        <button id="append-button" class="modal-button">Append</button>
        <button id="replace-button" class="modal-button">Replace</button>
      </div>
    </div>
  </div>

  <!-- Settings Modal -->
  <div id="settings-modal" class="modal">
    <div class="modal-content">
      <span id="close-settings-modal" class="close">&times;</span>
      <h2>Settings</h2>
      <label for="ollama-url-input">Ollama Instance URL:</label>
      <input type="text" id="ollama-url-input" value="http://localhost:11434">
      <button id="save-settings-btn">Save</button>
    </div>
  </div>


  <!-- Include idb library for IndexedDB (version 6) -->
  <script src="https://unpkg.com/idb@6.1.5/build/iife/index-min.js"></script>
  <!-- Include EasyMDE JS -->
  <script src="https://unpkg.com/easymde/dist/easymde.min.js"></script>
  <!-- Your app.js script -->
  <script type="module" src="main.js"></script>
</body>

</html>